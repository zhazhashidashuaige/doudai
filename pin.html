<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å…”KæœºPINç è·å–å¤„</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

      /*
    å¼ºåŒ–å±…ä¸­ï¼šè¿™å››è¡Œæ˜¯ç¡®ä¿æ¸¸æˆæœºåœ¨PCç«¯å®Œç¾å±…ä¸­çš„å…³é”®ï¼
    å®ƒå‘Šè¯‰æµè§ˆå™¨æŠŠbodyå˜æˆä¸€ä¸ªå¼¹æ€§å®¹å™¨ï¼Œ
    å¹¶å°†å…¶ä¸­çš„å”¯ä¸€å­å…ƒç´ (gameboy-container)åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šéƒ½å¯¹é½åˆ°ä¸­å¿ƒã€‚
  */
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        margin: 0;
        background: linear-gradient(135deg, #fde7ea 0%, #d8a7c8 100%);
        padding: 20px;
        box-sizing: border-box;
        overflow: hidden;
      }

      /* ...é—ªçƒæ˜Ÿæ˜Ÿç‰¹æ•ˆä¿æŒä¸å˜... */
      .sparkle-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
      }
      @keyframes twinkle {
        0%,
        100% {
          transform: scale(0);
          opacity: 0;
        }
        50% {
          transform: scale(1);
          opacity: 1;
        }
      }
      .star {
        position: absolute;
        mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50 0 L61 39 L100 50 L61 61 L50 100 L39 61 L0 50 L39 39 Z' fill='white'/%3E%3C/svg%3E");
        mask-size: contain;
        mask-repeat: no-repeat;
        mask-position: center;
        background-color: rgba(255, 255, 255, 0.9);
        animation: twinkle 3s infinite;
      }
      .star:nth-child(1) {
        top: 20%;
        left: 10%;
        width: 20px;
        height: 20px;
        animation-delay: 0s;
        animation-duration: 2.5s;
      }
      .star:nth-child(2) {
        top: 45%;
        left: 85%;
        width: 15px;
        height: 15px;
        animation-delay: 0.2s;
        animation-duration: 3.2s;
      }
      .star:nth-child(3) {
        top: 80%;
        left: 25%;
        width: 25px;
        height: 25px;
        animation-delay: 0.5s;
        animation-duration: 2.8s;
      }
      .star:nth-child(4) {
        top: 10%;
        left: 40%;
        width: 12px;
        height: 12px;
        animation-delay: 1.1s;
        animation-duration: 4s;
      }
      .star:nth-child(5) {
        top: 90%;
        left: 95%;
        width: 18px;
        height: 18px;
        animation-delay: 0.8s;
        animation-duration: 2.2s;
      }
      .star:nth-child(6) {
        top: 5%;
        left: 70%;
        width: 16px;
        height: 16px;
        animation-delay: 1.5s;
        animation-duration: 3s;
      }
      .star:nth-child(7) {
        top: 60%;
        left: 5%;
        width: 22px;
        height: 22px;
        animation-delay: 2s;
        animation-duration: 2.7s;
      }
      .star:nth-child(8) {
        top: 30%;
        left: 50%;
        width: 14px;
        height: 14px;
        animation-delay: 0.3s;
        animation-duration: 3.5s;
      }
      .star:nth-child(9) {
        top: 75%;
        left: 70%;
        width: 28px;
        height: 28px;
        animation-delay: 2.2s;
        animation-duration: 2s;
      }
      .star:nth-child(10) {
        top: 95%;
        left: 15%;
        width: 17px;
        height: 17px;
        animation-delay: 1.8s;
        animation-duration: 3.8s;
      }
      .star:nth-child(11) {
        top: 15%;
        left: 90%;
        width: 13px;
        height: 13px;
        animation-delay: 0.7s;
        animation-duration: 2.9s;
      }
      .star:nth-child(12) {
        top: 55%;
        left: 30%;
        width: 19px;
        height: 19px;
        animation-delay: 1.3s;
        animation-duration: 3.1s;
      }
      .star:nth-child(13) {
        top: 35%;
        left: 75%;
        width: 21px;
        height: 21px;
        animation-delay: 2.5s;
        animation-duration: 2.6s;
      }
      .star:nth-child(14) {
        top: 85%;
        left: 50%;
        width: 10px;
        height: 10px;
        animation-delay: 1.6s;
        animation-duration: 4.5s;
      }
      .star:nth-child(15) {
        top: 65%;
        left: 90%;
        width: 24px;
        height: 24px;
        animation-delay: 0.1s;
        animation-duration: 2.3s;
      }

      /* --- æ¼‚æµ®æ°”æ³¡ (å·²ä¿®å¤) --- */
      #floating-bubbles-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        pointer-events: none;
      }
      @keyframes float-up {
        0% {
          transform: translateY(0);
          opacity: 0;
        }
        10% {
          opacity: 0.9;
        }
        90% {
          opacity: 0.9;
        }
        100% {
          transform: translateY(-120vh);
          opacity: 0;
        }
      }
      .floating-bubble {
        position: absolute;
        bottom: -100px;
        background: rgba(254, 234, 238, 0.85);
        color: #d66f92;
        padding: 10px 15px;
        border-radius: 20px;
        font-size: 14px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(230, 168, 179, 0.5);
        animation-name: float-up;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        /* æ–°å¢ï¼šå¼ºåˆ¶æ–‡å­—æ¢è¡Œï¼Œé˜²æ­¢ç«–æ’ */
        word-break: break-all;
        /* æ–°å¢ï¼šè®¾ç½®æœ€å¤§å®½åº¦ï¼Œé˜²æ­¢æ°”æ³¡è¿‡å®½ */
        max-width: 250px;
      }
      /* å†æ¬¡ä¼˜åŒ–çš„åŠ¨ç”»èŠ‚å¥ï¼ */
      .floating-bubble:nth-child(1) {
        left: 10%;
        animation-duration: 22s;
        animation-delay: 0s;
      }
      .floating-bubble:nth-child(2) {
        left: 70%;
        animation-duration: 18s;
        animation-delay: 3s;
      }
      .floating-bubble:nth-child(3) {
        left: 40%;
        animation-duration: 25s;
        animation-delay: 5s;
      }
      /* ä¿®å¤ï¼šè°ƒæ•´äº†ç¬¬4ä¸ªæ°”æ³¡çš„åˆå§‹ä½ç½®å’Œå»¶è¿Ÿï¼Œè®©å®ƒä»å·¦ä¾§å‡ºç°ï¼Œä¸å†å¡é¡¿ */
      .floating-bubble:nth-child(4) {
        left: 5%;
        animation-duration: 20s;
        animation-delay: 1.5s;
      }
      .floating-bubble:nth-child(5) {
        left: 80%;
        animation-duration: 16s;
        animation-delay: 6s;
      }
      .floating-bubble:nth-child(6) {
        left: 55%;
        animation-duration: 28s;
        animation-delay: 8s;
      }

      /* --- è¶…èŒåƒç´ é£å¼¹çª— (ä¿æŒä¸å˜) --- */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        padding: 20px;
        box-sizing: border-box;
      }
      .modal-content-pixel {
        font-family: 'VT323', monospace;
        background: #fdf6f8;
        border: 3px solid #e784a4;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2), inset 0 0 0 3px #fff;
        border-radius: 8px;
        padding: 20px 25px;
        width: 100%;
        max-width: 420px;
        text-align: left;
      }
      .modal-title {
        color: #c73868;
        font-size: 28px;
        margin: 0 0 20px 0;
        text-align: center;
        text-shadow: 1px 1px 0 #fff;
      }
      .modal-list {
        list-style: none;
        padding-left: 0;
        margin: 0 0 25px 0;
        color: #5d1a33;
      }
      .modal-list li {
        padding-left: 30px;
        margin-bottom: 12px;
        font-size: 19px;
        line-height: 1.4;
        position: relative;
      }
      .modal-list li::before {
        content: 'â™¥';
        position: absolute;
        left: 5px;
        top: 0;
        color: #e784a4;
        font-size: 18px;
      }
      .modal-button {
        font-family: 'VT323', monospace;
        font-size: 22px;
        width: 100%;
        padding: 12px;
        color: #fff;
        background-color: #e784a4;
        border: 2px solid #c73868;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.1s ease-out;
        box-shadow: 0 3px 0 #c73868;
      }
      .modal-button:hover {
        background-color: #f097b6;
      }
      .modal-button:active {
        transform: translateY(2px);
        box-shadow: 0 1px 0 #c73868;
      }

      /* --- Game Boy æœºèº«åŠå…¶ä»–æ ·å¼ (ä¿æŒä¸å˜) --- */
      .gameboy-container {
        position: relative;
        width: 100%;
        max-width: 380px;
        background: #feeaee;
        border-radius: 20px 20px 50px 50px;
        border: 2px solid #e6a8b3;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2), inset 0 2px 4px rgba(255, 255, 255, 0.8);
        padding: 25px;
        display: flex;
        flex-direction: column;
      }
      .bow-decoration {
        position: absolute;
        top: -15px;
        left: 10px;
        width: 80px;
        transform: rotate(-15deg);
        z-index: 10;
        pointer-events: none;
      }
      .screen-frame {
        background: #d1c4c7;
        border-radius: 15px 15px 30px 15px;
        padding: 15px;
        box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.2);
      }
      .screen-content {
        background: #fdf6f8;
        border-radius: 8px;
        padding: 20px;
        box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
        text-align: center;
      }
      .screen-content h1 {
        color: #9d2b54;
        font-size: 20px;
        margin: 0 0 10px 0;
      }
      .screen-content p {
        color: #555;
        font-size: 13px;
        line-height: 1.5;
      }
      .screen-content input[type='text'] {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        margin: 15px 0 10px;
        box-sizing: border-box;
        text-align: center;
        background: rgba(255, 255, 255, 0.8);
        border: 1px solid #e6a8b3;
        color: #555;
        border-radius: 8px;
      }
      .screen-content input[type='text']::placeholder {
        color: #bbb;
      }
      .screen-content input[type='text']:disabled,
      .screen-content button:disabled {
        background-color: #f0e6e8;
        color: #b0a1a4;
        cursor: not-allowed;
        opacity: 0.7;
      }
      .screen-content button {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        margin: 5px 0 10px;
        box-sizing: border-box;
        text-align: center;
        border: none;
        cursor: pointer;
        background-color: #e784a4;
        border-radius: 8px;
        color: #fff;
        font-weight: bold;
      }
      .screen-content button:hover:not(:disabled) {
        background-color: #d66f92;
      }
      .pin-result {
        margin-top: 15px;
      }
      .screen-content .pin-code {
        color: #c73868;
        background: rgba(231, 132, 164, 0.1);
        padding: 10px;
        border-radius: 5px;
        font-size: 30px;
      }
      #copy-feedback {
        color: #9d2b54;
        height: 20px;
      }
      .controls-frame {
        padding-top: 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .d-pad {
        position: relative;
        width: 80px;
        height: 80px;
      }
      .d-pad > div {
        position: absolute;
        background: #555;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
      }
      .d-pad-up,
      .d-pad-down {
        width: 25px;
        height: 28px;
        left: 27.5px;
      }
      .d-pad-left,
      .d-pad-right {
        width: 28px;
        height: 25px;
        top: 27.5px;
      }
      .d-pad-up {
        top: 0;
        border-radius: 4px 4px 0 0;
      }
      .d-pad-down {
        bottom: 0;
        border-radius: 0 0 4px 4px;
      }
      .d-pad-left {
        left: 0;
        border-radius: 4px 0 0 4px;
      }
      .d-pad-right {
        right: 0;
        border-radius: 0 4px 4px 0;
      }
      .action-buttons-gb {
        width: 120px;
        display: flex;
        justify-content: space-around;
        align-items: center;
        transform: rotate(-25deg);
      }
      .action-buttons-gb .button-a,
      .action-buttons-gb .button-b {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        background-color: #fce4ec;
        border: 2px solid #8b2e2e;
        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);
        padding: 4px;
        box-sizing: border-box;
      }
      .action-buttons-gb img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
        display: block;
      }
      .start-select-gb {
        display: flex;
        flex-direction: column;
        align-self: flex-end;
        padding-bottom: 20px;
      }
      .start-btn {
        background: #777;
        color: white;
        font-size: 10px;
        font-weight: bold;
        padding: 5px 12px;
        border-radius: 10px;
        box-shadow: 0 2px 0px rgba(0, 0, 0, 0.2);
        cursor: pointer;
        user-select: none;
        transition: all 0.05s ease-in-out;
      }
      .start-btn:active {
        transform: translateY(1px);
        box-shadow: 0 1px 0px rgba(0, 0, 0, 0.2);
      }
    </style>
  </head>
  <body>
    <!-- æ›¿æ¢ä½ <body>æ ‡ç­¾é‡Œçš„æ‰€æœ‰å†…å®¹ (å¦‚æœå’Œä¸‹é¢ä¸€è‡´ï¼Œåˆ™æ— éœ€æ”¹åŠ¨) -->

    <div class="sparkle-container">
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
      <div class="star"></div>
    </div>

    <div id="floating-bubbles-container"></div>

    <div class="gameboy-container">
      <img
        src="https://s3plus.meituan.net/opapisdk/op_ticket_1_5677168484_1762188075575_qdqqd_7kvr3h.png"
        class="bow-decoration"
        alt="bow"
      />

      <div class="screen-frame">
        <div class="screen-content">
          <h1>ğŸ‡ å…”KæœºPINç è·å–å¤„ ğŸˆ</h1>
          <p>è¯·ç²˜è´´è®¾å¤‡ç ï¼Œç”Ÿæˆä½ çš„ä¸“å±PINç ã€‚</p>
          <input type="text" id="device-code-input" placeholder="è¯·å…ˆç‚¹å‡»STARTå¼€å§‹" disabled />
          <button id="generate-pin-btn" disabled>ç”ŸæˆPINç </button>
          <div id="pin-result-container" class="pin-result" style="display: none">
            <p>ä½ çš„ä¸“å±PINç æ˜¯ (ç‚¹å‡»å¤åˆ¶):</p>
            <div id="pin-display" class="pin-code"></div>
            <p id="copy-feedback"></p>
          </div>
        </div>
      </div>

      <div class="controls-frame">
        <div class="d-pad">
          <div class="d-pad-up"></div>
          <div class="d-pad-down"></div>
          <div class="d-pad-left"></div>
          <div class="d-pad-right"></div>
        </div>
        <div class="start-select-gb">
          <div class="start-btn">START</div>
        </div>
        <div class="action-buttons-gb">
          <div class="button-b">
            <img src="https://kycloud4.koyoo.cn/202511044232a202511040041008290.png" alt="B button image" />
          </div>
          <div class="button-a">
            <img src="https://kycloud4.koyoo.cn/20251104221c8202511040041045225.png" alt="A button image" />
          </div>
        </div>
      </div>
    </div>
    <div id="agreement-modal" class="modal-overlay" style="display: none">
      <div class="modal-content-pixel">
        <h2 class="modal-title">~* è¯·ç¡®è®¤ *~</h2>
        <ul class="modal-list">
          <li>æˆ‘æ˜¯SillyTaverné…’é¦†ç©å®¶</li>
          <li>æˆ‘ä¿è¯ä¼šåœ¨å¾è¯¢å†™å¡è€å¸ˆåŒæ„åæ‰ä¼šå¯¼å…¥è§’è‰²å¡</li>
          <li>æˆ‘ä¿è¯ç»å¯¹ä¸ä¼šä¾®è¾±è¾±éª‚è§’è‰²</li>
          <li>æˆ‘å°Šé‡ä»»ä½•åˆ›ä½œè€…ï¼Œä¸ä¼šè´´è„¸ä»»ä½•è€å¸ˆ</li>
          <li>æˆ‘ä¼šéµå®ˆç¤¾åŒºè§„å®šï¼Œä¸äºŒä¼ å…”kæœºé“¾æ¥ï¼Œä¸äºŒä¼ è€å¸ˆè§’è‰²å¡</li>
          <li>æˆ‘åšå†³åå¯¹å•†ä¸šåŒ–ï¼Œä¸ä¼šå·å–é“¾æ¥å’Œè§’è‰²å¡è¿›è¡Œè´©å–</li>
        </ul>
        <button id="agree-btn" class="modal-button">åŒæ„å¹¶å¼€å§‹</button>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // --- è·å–å…ƒç´  (ä¸å˜) ---
        const deviceCodeInput = document.getElementById('device-code-input');
        const generateBtn = document.getElementById('generate-pin-btn');
        const resultContainer = document.getElementById('pin-result-container');
        const pinDisplay = document.getElementById('pin-display');
        const copyFeedback = document.getElementById('copy-feedback');
        const startBtn = document.querySelector('.start-btn');
        const agreementModal = document.getElementById('agreement-modal');
        const agreeBtn = document.getElementById('agree-btn');
        const bubbleContainer = document.getElementById('floating-bubbles-container');

        // --- æ ¸å¿ƒå‡½æ•° (ä¸å˜) ---
        function generatePinFromDeviceCode(deviceCode) {
          /* ... */
        }
        function createFloatingBubbles() {
          /* ... */
        }

        // çœç•¥å†…éƒ¨ä»£ç ï¼Œå› ä¸ºå®ƒä»¬å’Œä¸Šä¸€ç‰ˆå®Œå…¨ç›¸åŒ
        function generatePinFromDeviceCode(deviceCode) {
          if (!deviceCode || deviceCode.length < 6) return 'INVALID';
          return deviceCode.split('').reverse().join('').substring(0, 6).toUpperCase();
        }
        function createFloatingBubbles() {
          const guarantees = [
            'æˆ‘æ˜¯SillyTaverné…’é¦†ç©å®¶',
            'æˆ‘ä¿è¯ä¼šåœ¨å¾è¯¢å†™å¡è€å¸ˆåŒæ„åæ‰ä¼šå¯¼å…¥è§’è‰²å¡',
            'æˆ‘ä¿è¯ç»å¯¹ä¸ä¼šä¾®è¾±è¾±éª‚è§’è‰²',
            'æˆ‘å°Šé‡ä»»ä½•åˆ›ä½œè€…ï¼Œä¸ä¼šè´´è„¸ä»»ä½•è€å¸ˆ',
            'æˆ‘ä¼šéµå®ˆç¤¾åŒºè§„å®šï¼Œä¸äºŒä¼ å…”kæœºé“¾æ¥ï¼Œä¸äºŒä¼ è€å¸ˆè§’è‰²å¡',
            'æˆ‘åšå†³åå¯¹å•†ä¸šåŒ–ï¼Œä¸ä¼šå·å–é“¾æ¥å’Œè§’è‰²å¡è¿›è¡Œè´©å–',
          ];
          bubbleContainer.innerHTML = '';
          guarantees.forEach(text => {
            const bubble = document.createElement('div');
            bubble.className = 'floating-bubble';
            bubble.textContent = text;
            bubbleContainer.appendChild(bubble);
          });
        }

        // --- äº‹ä»¶ç›‘å¬å™¨ (ä¸å˜) ---
        startBtn.addEventListener('click', () => {
          agreementModal.style.display = 'flex';
        });
        agreeBtn.addEventListener('click', () => {
          agreementModal.style.display = 'none';
          deviceCodeInput.disabled = false;
          generateBtn.disabled = false;
          deviceCodeInput.placeholder = 'è¯·åœ¨æ­¤å¤„ç²˜è´´è®¾å¤‡ç ';
          deviceCodeInput.focus();
          createFloatingBubbles();
        });
        generateBtn.addEventListener('click', () => {
          const deviceCode = deviceCodeInput.value.trim();
          if (deviceCode) {
            const pinCode = generatePinFromDeviceCode(deviceCode);
            pinDisplay.textContent = pinCode;
            resultContainer.style.display = 'block';
          } else {
            alert('è¯·è¾“å…¥è®¾å¤‡ç ï¼');
            resultContainer.style.display = 'none';
          }
        });
        pinDisplay.addEventListener('click', () => {
          navigator.clipboard
            .writeText(pinDisplay.textContent)
            .then(() => {
              copyFeedback.textContent = 'å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼';
              setTimeout(() => {
                copyFeedback.textContent = '';
              }, 1500);
            })
            .catch(err => {
              copyFeedback.textContent = 'å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ã€‚';
            });
        });
      });
    </script>
  </body>
</html>
